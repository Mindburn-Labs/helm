# HELM API Contract Versioning

## Version Format

HELM uses semantic versioning for the API contract:
- **Major** (breaking): endpoint removal, required field addition, error shape change
- **Minor** (additive): new endpoint, optional field, new reason code
- **Patch** (fix): documentation, example correction

## Current Version

`0.1.0` — Initial OSS release.

## Version Sources

| Location | What it governs |
|----------|----------------|
| `api/openapi/helm.openapi.yaml` → `info.version` | Canonical contract version |
| `sdk/*/package.json` / `pyproject.toml` / etc. | SDK package version (tracks contract) |
| `core/cmd/helm/main.go` → version const | Server binary version |

## Stability Guarantees

### Stable (v0.1+)
- Error envelope shape: `{ error: { message, type, code, reason_code, details? } }`
- Reason code set (additive only — codes are never removed)
- Endpoint paths for: proxy, approval, proofgraph, evidence, conformance, health

### Unstable (may change in v0.2)
- Response field additions (additive, won't break)
- New endpoints (additive)
- `details` object contents

## Drift Prevention

Generated types in `sdk/*/types_gen.*` are regenerated by `scripts/sdk/gen.sh`.
CI runs `scripts/ci/sdk_drift_check.sh` on every PR — fails if diff exists.

## Adding a New Endpoint

1. Add to `api/openapi/helm.openapi.yaml`
2. Run `bash scripts/sdk/gen.sh`
3. Update wrapper clients in `sdk/*/client.*`
4. Add examples to `examples/`
5. CI will validate drift + build
